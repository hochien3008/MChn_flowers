<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω S·∫£n ph·∫©m - Admin Sweetie Garden</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
    <link rel="icon" type="image/png" href="../../assets/images/logo.png">
    <link rel="stylesheet" href="../assets/admin.css">
    <style>
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="admin-body">
    <!-- Admin Sidebar -->
    <aside class="admin-sidebar">
        <div class="admin-sidebar-header">
            <img src="../../assets/images/logo.png" alt="Logo" class="admin-logo">
            <h2>Sweetie Garden</h2>
            <p>Admin Panel</p>
        </div>
        <nav class="admin-nav">
            <a href="dashboard.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg></span>
                <span>Dashboard</span>
            </a>
            <a href="products.html" class="admin-nav-item active">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/></svg></span>
                <span>S·∫£n ph·∫©m</span>
            </a>
            <a href="orders.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71z"/></svg></span>
                <span>ƒê∆°n h√†ng</span>
            </a>
            <a href="customers.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg></span>
                <span>Kh√°ch h√†ng</span>
            </a>
            <a href="coupons.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/></svg></span>
                <span>M√£ gi·∫£m gi√°</span>
            </a>
            <a href="combo.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2z"/></svg></span>
                <span>Combo</span>
            </a>
            <a href="staff.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></span>
                <span>Nh√¢n vi√™n</span>
            </a>
            <a href="blog.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg></span>
                <span>Blog</span>
            </a>
        </nav>
        <div class="admin-sidebar-footer">
            <a href="../../index.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg></span>
                <span>V·ªÅ trang ch·ªß</span>
            </a>
            <a href="../login.html" class="admin-nav-item">
                <span class="admin-icon"><svg viewBox="0 0 24 24"><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/></svg></span>
                <span>ƒêƒÉng xu·∫•t</span>
            </a>
        </div>
    </aside>

    <!-- Admin Main Content -->
    <main class="admin-main">
        <!-- Admin Header -->
        <header class="admin-header">
            <div class="admin-header-left">
                <h1>Qu·∫£n l√Ω S·∫£n ph·∫©m</h1>
                <p class="admin-breadcrumb">Trang ch·ªß / S·∫£n ph·∫©m</p>
            </div>
            <div class="admin-header-right">
                <div class="admin-search-box" style="position: relative;">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" style="opacity: 0.5; position: absolute; left: 12px; top: 50%; transform: translateY(-50%); pointer-events: none;"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                    <input type="text" id="productSearchInput" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m theo t√™n, m√¥ t·∫£..." style="padding-left: 40px; padding-right: 40px;">
                    <button id="clearSearchBtn" onclick="clearSearch()" style="display: none; position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: transparent; border: none; cursor: pointer; padding: 4px; opacity: 0.6; transition: opacity 0.2s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.6'">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                    </button>
                    <div id="searchLoading" style="display: none; position: absolute; right: 35px; top: 50%; transform: translateY(-50%);">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="animation: spin 1s linear infinite;">
                            <circle cx="12" cy="12" r="10" opacity="0.25"></circle>
                            <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" opacity="0.75"></path>
                        </svg>
                    </div>
                </div>
                <div id="searchResultsCount" style="display: none; margin-right: 12px; padding: 8px 16px; background: #f0f9ff; border-radius: 6px; color: #0284c7; font-size: 0.875rem; font-weight: 500;">
                    <span id="searchResultsText"></span>
                </div>
                <button class="admin-btn-primary" onclick="openProductModal()">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                    <span>Th√™m s·∫£n ph·∫©m</span>
                </button>
                <div class="admin-user-info">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                    <span>Admin</span>
                </div>
            </div>
        </header>

        <!-- Filter Bar -->
        <div class="admin-filter-bar">
            <div class="admin-filter-group">
                <label>Lo·∫°i s·∫£n ph·∫©m:</label>
                <select class="admin-select" data-filter="category">
                    <option value="">T·∫•t c·∫£</option>
                </select>
            </div>
            <div class="admin-filter-group">
                <label>Tr·∫°ng th√°i:</label>
                <select class="admin-select" data-filter="status">
                    <option value="">T·∫•t c·∫£</option>
                    <option value="active">ƒêang b√°n</option>
                    <option value="out-of-stock">H·∫øt h√†ng</option>
                    <option value="draft">Nh√°p</option>
                </select>
            </div>
            <div class="admin-filter-group">
                <label>S·∫Øp x·∫øp:</label>
                <select class="admin-select" data-filter="sort">
                    <option value="newest">M·ªõi nh·∫•t</option>
                    <option value="price-asc">Gi√° tƒÉng d·∫ßn</option>
                    <option value="price-desc">Gi√° gi·∫£m d·∫ßn</option>
                    <option value="best-selling">B√°n ch·∫°y</option>
                </select>
            </div>
        </div>

        <!-- Products Table -->
        <div class="admin-card">
            <div class="admin-table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>H√¨nh ·∫£nh</th>
                            <th>T√™n s·∫£n ph·∫©m</th>
                            <th>Lo·∫°i</th>
                            <th>Gi√°</th>
                            <th>Gi√° KM</th>
                            <th>T·ªìn kho</th>
                            <th>ƒê√£ b√°n</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="9" style="text-align: center; padding: 2rem;">
                                ƒêang t·∫£i s·∫£n ph·∫©m...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Pagination -->
            <div class="admin-pagination">
                <button class="admin-page-btn">‚Äπ Tr∆∞·ªõc</button>
                <button class="admin-page-btn active">1</button>
                <button class="admin-page-btn">2</button>
                <button class="admin-page-btn">3</button>
                <button class="admin-page-btn">Sau ‚Ä∫</button>
            </div>
        </div>

        <!-- Product Modal (Hidden by default) -->
        <div id="productModal" class="admin-modal" style="display: none;">
            <div class="admin-modal-content">
                <div class="admin-modal-header">
                    <h2>Th√™m/S·ª≠a S·∫£n ph·∫©m</h2>
                    <button class="admin-modal-close" onclick="closeProductModal()">√ó</button>
                </div>
                <div class="admin-modal-body">
                    <form class="admin-form" id="productForm">
                        <div class="admin-form-row">
                            <div class="admin-form-group">
                                <label>T√™n s·∫£n ph·∫©m *</label>
                                <input type="text" name="name" id="productName" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m" required>
                            </div>
                            <div class="admin-form-group">
                                <label>Lo·∫°i s·∫£n ph·∫©m *</label>
                                <select class="admin-select" name="category_id" id="productCategory" required>
                                    <option value="">Ch·ªçn lo·∫°i</option>
                                </select>
                            </div>
                        </div>
                        <div class="admin-form-row">
                            <div class="admin-form-group">
                                <label>Gi√° g·ªëc (‚Ç´) *</label>
                                <input type="number" name="price" id="productPrice" placeholder="0" step="1000" required>
                            </div>
                            <div class="admin-form-group">
                                <label>Gi√° khuy·∫øn m√£i (‚Ç´)</label>
                                <input type="number" name="sale_price" id="productSalePrice" placeholder="0" step="1000">
                            </div>
                            <div class="admin-form-group">
                                <label>S·ªë l∆∞·ª£ng t·ªìn kho *</label>
                                <input type="number" name="stock" id="productStock" placeholder="0" min="0" required>
                            </div>
                        </div>
                        <div class="admin-form-group">
                            <label>M√¥ t·∫£</label>
                            <textarea name="description" id="productDescription" rows="4" placeholder="Nh·∫≠p m√¥ t·∫£ s·∫£n ph·∫©m"></textarea>
                        </div>
                        <div class="admin-form-group">
                            <label>H√¨nh ·∫£nh</label>
                            <div class="admin-upload-area" id="imageUploadArea" style="border: 2px dashed #e0e0e0; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s; min-height: 150px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                                <div id="imageUploadPlaceholder" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                                    <span style="font-size: 48px;">üì∑</span>
                                    <p style="margin: 10px 0; color: #666;">K√©o th·∫£ ·∫£nh v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn</p>
                                </div>
                                <input type="file" name="image" accept="image/*" id="productImage" style="display: none;">
                                <div id="imagePreview" style="display: none; width: 100%; text-align: center;">
                                    <img id="previewImg" src="" alt="Preview" style="max-width: 300px; max-height: 300px; border-radius: 8px; object-fit: cover; border: 2px solid #e0e0e0;">
                                    <div style="margin-top: 15px;">
                                        <button type="button" onclick="changeImage()" style="padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; margin-right: 10px;">Thay ƒë·ªïi ·∫£nh</button>
                                        <button type="button" onclick="removeImagePreview()" style="padding: 8px 16px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer;">X√≥a ·∫£nh</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="admin-form-group">
                            <label>Bi·∫øn th·ªÉ (Size/Color)</label>
                            <div class="admin-variant-list">
                                <div class="admin-variant-item">
                                    <input type="text" placeholder="T√™n bi·∫øn th·ªÉ">
                                    <input type="number" placeholder="Gi√°">
                                    <button type="button" class="admin-btn-remove">√ó</button>
                                </div>
                            </div>
                            <button type="button" class="admin-btn-add-variant">+ Th√™m bi·∫øn th·ªÉ</button>
                        </div>
                        <div class="admin-modal-footer">
                            <button type="button" class="admin-btn-secondary" onclick="closeProductModal()">H·ªßy</button>
                            <button type="submit" class="admin-btn-primary">L∆∞u s·∫£n ph·∫©m</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <script>
        function openProductModal() {
            const modal = document.getElementById('productModal');
            if (modal) modal.style.display = 'flex';
        }
        function closeProductModal() {
            const modal = document.getElementById('productModal');
            if (modal) modal.style.display = 'none';
            // Reset image preview
            removeImagePreview();
        }
        function removeImagePreview() {
            const preview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            const fileInput = document.getElementById('productImage');
            const placeholder = document.getElementById('imageUploadPlaceholder');
            if (preview) preview.style.display = 'none';
            if (previewImg) previewImg.src = '';
            if (fileInput) fileInput.value = '';
            if (placeholder) placeholder.style.display = 'flex';
        }
        function changeImage() {
            const fileInput = document.getElementById('productImage');
            if (fileInput) fileInput.click();
        }
        function clearSearch() {
            const searchInput = document.getElementById('productSearchInput');
            const clearBtn = document.getElementById('clearSearchBtn');
            if (searchInput) {
                searchInput.value = '';
                if (clearBtn) clearBtn.style.display = 'none';
                // Trigger search to reload all products
                if (window.getCurrentFilters && window.loadAdminProducts) {
                    const params = window.getCurrentFilters();
                    window.loadAdminProducts(params);
                }
            }
        }
        window.openProductModal = openProductModal;
        window.closeProductModal = closeProductModal;
        window.removeImagePreview = removeImagePreview;
        window.changeImage = changeImage;
        window.clearSearch = clearSearch;
    </script>
    <script src="../../assets/js/api.js"></script>
    <script src="../../assets/js/admin-products.js?v=7"></script>
</body>
</html>

